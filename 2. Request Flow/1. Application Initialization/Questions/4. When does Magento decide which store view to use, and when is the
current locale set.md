# When does Magento decide which store view to use, and when is the current locale set?

1. In the index.php we set the run type and code.
2. Then after the module config is loaded we call - Mage_Core_Model_App->run() calls *Mage_Core_Model_App->\_initCurrentStore();*

### Mage_Core_Model_App->\_initCurrentStore();

This sets the property current store by doing a switch statement on the type (website/store/group) and then getting the code from the config XML.
